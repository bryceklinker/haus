@page "/device-simulator/add"

@using Haus.Api.Client.Devices
@using Haus.Core.Models.Common
@using Haus.Core.Models.Devices
@inject IDeviceApiClient DeviceClient;

<MudPopoverProvider />

<LoadingContent IsLoading="IsLoading" LoadingText="Loading Device Types...">
    <MudSelect @bind-Value="_deviceType">
        @foreach (var type in DeviceTypes.Items)
        {
            <MudSelectItem T="DeviceType?" Value="type"/>
        }
    </MudSelect>
</LoadingContent>

@code {
    private DeviceType? _deviceType = null;
    public bool IsLoading { get; set; } = false;

    public ListResult<DeviceType> DeviceTypes { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        IsLoading = true;
        DeviceTypes = await DeviceClient.GetDeviceTypesAsync();
        IsLoading = false;
    }

}